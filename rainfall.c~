//
//  rainfall.c
//  
//
//  Created by Claire Yuan on 11/16/15.
//
//

#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <string.h>
#include <assert.h>
#include <time.h>


typedef struct{
    int ** elevation;
    double ** absorbed;
    int N;
    int complete_step;
} landscape_t;

typedef landscape_t* landscape;

int** read_elevation(char *filename, int N){
    
    int ** elevation;
    int i, j;
    
    FILE *fptr;
    
    fptr=fopen(filename, "r");
    assert(fptr!=NULL);
    
    /* allocate memory for each row pointer*/
    elevation = (int **)malloc(N*sizeof(int*));
    assert(elevation!=NULL);
    
    /* allocate memory for each row */
    for(i=0; i< N; i++) {
        elevation[i] = (int*)malloc(N*sizeof(int));
        assert(elevation[i]!=NULL);
    }
    
    for (i=0; i<N; i++) {
        for (j=0; j<N; j++) {
            fscanf(fptr, "%d", &elevation[i][j]);
        }
    }
        
    fclose(fptr);
    printf("Finished reading image file !\n");
    
    return elevation;
    
}


int main(int argc, char** argv)
{
    
    if (argc != 5) {
        printf("Usage: main  <M> <A> <N> <elevation_file>\n");
        assert(argc == 5);
    }
    
    int M=atoi(argv[1]); // # of simulation time steps
    int A=atoi(argv[2]); // absorption rate
    int N=atoi(argv[3]); // dimensionof the landscape
    
    int ** elevation = read_elevation(argv[4], N);
    
    

    return 0;
}

